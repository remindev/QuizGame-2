<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play</title>
    <!-- CSS only bootsrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="css/code.css">
    <link rel="stylesheet" href="/css/play.css">
</head>

<body onload="init()">

    <div class="play-sucess-anum" id="play_sucess_anim" style="display: none;">
        <img src="/res/good.gif" alt="">
        <h2>Correct answer</h2>
        <div class="btn-cont">
            <button onclick="window.location.href='/'">Menu</button>
            <button onclick="nextLevel()">Next level</button>
        </div>
    </div>

    <!-- title -->
    <div class="title-cont">
        <div class="container position-relative">
            <h4 onclick="window.location.href='/'">
                <%= title %> Game
            </h4>

            <div class="level-info">
                Level <%= level %> <span class="dim d-none d-md-inline "> : <%= currentGame.title %> </span>
            </div>

            <div class="right" onclick="Auth.logout()">
                <img src="/res/logout.svg" alt="">
                Logout
            </div>
        </div>
    </div>

    <!-- game container -->
    <div class="game-q-cont">
        <br><br><br><br>
        <div class="container">
            <h4 class="text-center">
               Find the output of the <b>Java Script</b> code below
            </h4>
            <pre>
    <code>
    <%= currentGame.question %>
    </code>
            </pre>
        </div>
    </div>

    <br><br><br><br>

    <!-- submit your answer's -->
    <div class="game-sub-cont">
        <div class="container">
            <div class="err-disp" id="err_disp" style="display: none;">
                Oops thats an error
            </div>
            <input type="text" id="input_answer" placeholder="# Did you get it ? Type your answer ">
            <button onclick="App.answerSubmit(this.parentElement)">Submit</button>
        </div>
    </div>

    <script>
        function nextLevel() {
            window.location.href = `/play?level=lv_${Number(window.location.search.split("_")[1]) + 1}`;
        }

        function inputEnter() {
            let input = document.getElementById("input_answer");

            input.addEventListener('keyup', (e) => {
                if (e.keyCode == 13) {
                    App.answerSubmit(input.parentElement);
                };
            });

        }

        inputEnter();      


    </script>

    <script src="/js/code.js"></script>
    <script src="/js/home.js"></script>
    <script src="/js/answer.js"></script>

    <script>
        function init() {
            hljs.highlightAll();
        }
    </script>


</body>

</html>